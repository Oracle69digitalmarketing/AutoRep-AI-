(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1110:(e,s,a)=>{Promise.resolve().then(a.bind(a,5782))},5782:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var t=a(5155),n=a(2115),r=a(5125),c=a(6006),d=a(5704);function i(){let[e,s]=(0,n.useState)(""),[a,i]=(0,n.useState)([]),[o,l]=(0,n.useState)(null);async function u(){s((await r.A.post("/api/proxy/auth/login",{username:"admin",password:"admin"})).data.access_token)}async function h(){try{let s=d.env.NEXT_PUBLIC_BACKEND_URL||"/api/proxy",a=await r.A.get("".concat(s,"/admin/leads"),{headers:{Authorization:"Bearer ".concat(e)}});l(a.data.totalLeads),i(a.data.topLeads)}catch(e){console.error(e)}}return(0,n.useEffect)(()=>{e&&h()},[e]),(0,n.useEffect)(()=>(c.s.on("lead:created",e=>{i(s=>[e,...s].slice(0,10)),l(e=>(e||0)+1)}),()=>{c.s.off("lead:created")}),[]),(0,t.jsxs)("div",{style:{padding:24},children:[(0,t.jsx)("h2",{children:"Admin — Leads"}),e?(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:["Total leads: ",o]}),(0,t.jsx)("ul",{children:a.map(e=>(0,t.jsxs)("li",{children:[e.phone," — score: ",e.score]},e.id))})]}):(0,t.jsx)("button",{onClick:u,children:"Login (admin)"})]})}},6006:(e,s,a)=>{"use strict";a.d(s,{s:()=>r});var t=a(9829);let n=a(5704).env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:4000",r=(0,t.io)(n,{transports:["websocket"]})}},e=>{e.O(0,[376,125,829,441,255,358],()=>e(e.s=1110)),_N_E=e.O()}]);